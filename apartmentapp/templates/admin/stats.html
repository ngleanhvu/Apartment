{% extends 'admin/base_site.html'%}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<div class="container mt-5">
    <h1 class="mb-4 text-center">Thống kê khảo sát</h1>
    <form method="get" id="survey-form" class="d-flex align-items-center gap-2 mb-4">
        <select name="survey" class="form-select w-auto">
            {% for s in surveys %}
                <option value="{{ s.id }}">
                    Khảo sát về: {{ s.title }}
                </option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-info ml-5">Thống kê</button>
    </form>

    {% for question_content, data in stats.items %}
        <div class="card mb-4">
            <div class="card-body">
                <h3 class="card-title">Câu hỏi: {{ question_content }}</h3>
                {% for option in data.options %}
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>Lựa chọn: {{ option.content }}</span>
                        <span class="text-info">{{ option.count }} người chọn</span>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% empty %}
        <div>
            Chưa có dữ liệu khảo sát.
        </div>
    {% endfor %}
    <h3 class="mb-4 text-right">Tổng số người tham gia khảo sát: {{sum}}</h3>
</div>
{% endblock %}